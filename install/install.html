
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Build instructions &#8212; re2c 1.2 documentation</title>
    <link rel="stylesheet" href="../_static/theme-re2c.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="alternate" type="application/atom+xml" href="../feed/atom.xml" title="Atom 1.0" />
    
 
  </head><body>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="re2c-logo">
    re2c
</div>

<h3><a href="../index.html">Home</a></h3>
<div class="re2c-toc-global">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../manual/manual.html">User manual</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Build instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/changelog/changelog.html">Changelog</a></li>
</ul>

</div>
    <h3>Build instructions</h3>
    <div class="re2c-toc-local">
        <ul>
<li><a class="reference internal" href="#">Build instructions</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#building">Building</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
</ul>
</li>
</ul>

    </div>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="build-instructions">
<h1>Build instructions<a class="headerlink" href="#build-instructions" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>Re2c users need only a C++ compiler to build re2c from a release tarball, and
optionally Bash if they want to run the tests.</p>
<p>Re2c developers also need Autotools, Bison (if they change parser code), rst2man
(if they change documentation), Sphinx (if they change this website), Mingw and
Wine (if they test builds for Windows) and Libtool (if they change the
experimental libre2c library). A few occasional helper scripts are written in
Haskell (but they are not necessary for re2c development).
Re2c is a bootstrapping project with all the consequences.</p>
</div>
<div class="section" id="building">
<h2>Building<a class="headerlink" href="#building" title="Permalink to this headline">¶</a></h2>
<p>If you are building re2c from repository, <em>not</em> from a release tarball, first of
all you should run Autotools:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ autoreconf -i -W all
</pre></div>
</div>
<p>The simplest possible build is an in-tree build (will install re2c to
<code class="docutils literal notranslate"><span class="pre">$RE2C_PATH</span></code> location):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./configure --prefix<span class="o">=</span><span class="nv">$RE2C_PATH</span>
$ make
$ make install
</pre></div>
</div>
<p>Out-of-tree build (puts build artifacts in a separate directory):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir <span class="nv">$BUILD_DIR</span>
$ <span class="nb">cd</span> <span class="nv">$BUILD_DIR</span>
$ ../configure --prefix<span class="o">=</span><span class="nv">$RE2C_PATH</span>
$ make
$ make install
</pre></div>
</div>
<p>Bootstrapping build (rebuilds re2c with the freshly built re2c and updates
precompiled bootstrap files):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ make bootstrap
</pre></div>
</div>
<p>Building on Windows is more tricky. The best option is to use
<a class="reference external" href="https://cygwin.com/">Cygwin</a>, or build re2c with <a class="reference external" href="http://mingw.org/">Mingw</a>
(Mingw builds are supported and tested regularly).
For some Mingw versions you might have to use <code class="docutils literal notranslate"><span class="pre">-std=gnu++11</span></code> compiler option
to avoid spurious build errors (re2c uses <code class="docutils literal notranslate"><span class="pre">-std=c++98</span></code> by default).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./configure --host i686-w64-ming <span class="m">32</span> <span class="nv">CXXFLAGS</span><span class="o">=</span><span class="s2">&quot;-std=gnu++11&quot;</span>
</pre></div>
</div>
<p>To build documentation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./configure --enable-docs
</pre></div>
</div>
<p>To enable debug:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./configure --enable-debug
</pre></div>
</div>
<p>To build the experimental libre2c library:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./configure --enable-libs
</pre></div>
</div>
<p>Re2c provides a bunch of build scripts <code class="docutils literal notranslate"><span class="pre">__build_*.sh</span></code> that can be used
for specialized builds with <code class="docutils literal notranslate"><span class="pre">GLIBCXX_DEBUG</span></code>, AddressSanitizer, etc.</p>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Re2c has a main test suite and a couple of small unit tests. Run them all:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ make check
</pre></div>
</div>
<p>Run only the main test suite and watch the progress dumped on <code class="docutils literal notranslate"><span class="pre">stdout</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./run_tests.sh -j&lt;N&gt;
</pre></div>
</div>
<p>Run the main test suite with <code class="docutils literal notranslate"><span class="pre">--skeleton</span></code> re2c option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./run_tests.sh --skeleton
</pre></div>
</div>
<p>Run the test suite under Valgrind (takes some time and memory):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ make vtests
</pre></div>
</div>
<p>Test mingw builds with Wine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ make wtests
</pre></div>
</div>
<p>Check the distribution:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ make distcheck
</pre></div>
</div>
<p>Re2c provides a helper script <code class="docutils literal notranslate"><span class="pre">__alltest.sh</span></code> that builds and tests various
re2c build flavours with <code class="docutils literal notranslate"><span class="pre">GLIBCXX_DEBUG</span></code>, AddressSanitizer, etc.
There is a couple of fuzz-testing Haskell scripts in the <code class="docutils literal notranslate"><span class="pre">fuzz</span></code> subdirectory;
they are based on the QuickCheck library and can be easily modified to fuzz-test
various aspects of re2c by comparing current re2c version against older versions
or against other regular expression libraries.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
      Last updated on Dec 25, 2019.
    </div>
  </body>
</html>